<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<script language="JavaScript" type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>

<script type="text/javascript" src="../src/head.js"></script>
<script type="text/javascript" src="../src/node.js"></script>
<script type="text/javascript" src="../src/builtinobjects.js"></script>
<script type="text/javascript" src="../src/parse.js"></script>
<script type="text/javascript" src="../src/interpreter.js"></script>
<script type="text/javascript" src="../src/builtinmethods.js"></script>
<script type="text/javascript" src="../src/util.js"></script>

<script language="JavaScript" type="text/javascript">

var ruby = new RubyEngine.Interpreter();

function testLiteral() {
	assertEquals("literal 1", ruby.exec(" '' "), "");
	assertEquals("literal 2", ruby.exec(' "" '), "");
	assertEquals("literal 3", ruby.exec(" 'abc' "), "abc");
	assertEquals("literal 4", ruby.exec(' "xyz" '), "xyz");
}

function testAdd() {
	assertEquals("string add 1", ruby.exec(" 'a'+'b' "), "ab");
	assertEquals("string add 2", ruby.exec(" 'd'+'e'+'f' "), "def");
	assertEquals("string add 3", ruby.exec(" x='u'+'b'; \"r\"+x+\"y\" "), "ruby");
}

function testReverse() {
	assertEquals("reverse 1", ruby.exec(' "a".reverse '), "a");
	assertEquals("reverse 2", ruby.exec(' "abc".reverse '), "cba");
	assertEquals("reverse 3", ruby.exec(' "".reverse '), "");
	assertEquals("reverse 4", ruby.exec(" x='ruby'; x.reverse "), "ybur");
}

function testBrackett() {
	assertEquals("string[nth] 1", ruby.exec(' "ABC"[0] '), 65);
	assertEquals("string[nth] 2", ruby.exec(' "ABC"[1] '), 66);
	//assertEquals("string[nth] 3", ruby.exec(' "ABC"[-1] '), 67);
}

function testSubstituteBrackett() {
	assertEquals("string[nth]= 1", ruby.exec(' a="abc"; a[1]=66; a '), "aBc");
	assertEquals("string[nth]= 2", ruby.exec(' a="abc"; a[1]="XYZ"; a '), "aXYZc");
}

</script>
</head>
</html>
